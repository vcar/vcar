{% extends "layout.html" %}

{% from "importer/macros.html" import info_box, box_header %}

{% block title %}
    vCar importer manager :: Platform | {{ super() }}
{% endblock %}

{% block content_header %}
    <section class="content-header">
        <h1>
        Import wizard
        </h1>
        <ol class="breadcrumb">
            <li><a href="{{ url_for('carboard.index') }}"><i class="fa fa-dashboard"></i>Home</a></li>
            <li><a href="#">Importer</a></li>
            <li class="active">Import wizard</li>
        </ol>
    </section>
{% endblock content_header %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="callout callout-vcar">
            <i class="callout-icon">Step 1 of 5</i>
            <h4>Choose a platform</h4>
            <p>The import wizard will be your guide to successfully upload and configure your trace files.</p>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-12">
        <form action="{{ url_for('importer.platform') }}" method="POST" id="platform">
			<hr class="mid-line">
            <div class="btn-group" data-toggle="buttons">
                {% for platform in platforms %}
                    <label class="info-box btn btn-vcar">
                        <input type="radio" autocomplete="off" name="platform" value="{{ platform.id }}">
                        <span class="info-box-icon">
                            <img class="info-box-img" src="{{ resized_img_src(config.UPLOAD_PLATFORM + platform.logo, width=100) }}">
                        </span>
                        <div class="info-box-content">
                            <span class="info-box-text">{{ platform.name }}</span>
                            <span class="info-box-number">{{ platform.description }}</span>
                        </div>
                    </label>
                {% endfor %}
            </div>
            <div class="footer">
                <div class="pull-left box-alert" style="display:none">
                    <i class="fa fa-info-circle"></i>
                    Please select a platform first to proccess the importing wizard.
                </div>
                <a class="pull-right btn btn-vcar-action" href="#" id="next">
                    <i class="fa fa-chevron-right"></i>
                    Continue
                </a>
            </div>
        </form>
    </div>
</div>
{%- endblock content %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript">
        $(document).ready(function () {
            $("#next").click(function (e) {
                e.preventDefault();
                if ($("input:radio[name=platform]:checked").length == 0) {
                    $('.box-alert').show();
                }else{
                    e.preventDefault();
                    $('#platform').submit();
                }
            })
        });
    </script>
{% endblock %}
